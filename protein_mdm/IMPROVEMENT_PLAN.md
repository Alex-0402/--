# æ¨¡å‹æ”¹è¿›è®¡åˆ’

## ğŸ“Š å½“å‰é—®é¢˜è¯Šæ–­

æ ¹æ®æµ‹è¯•ç»“æœåˆ†æï¼Œæ¨¡å‹è¡¨ç°æ¥è¿‘éšæœºçŒœæµ‹æ°´å¹³ï¼š

- **ç‰‡æ®µæŸå¤±**: 2.7646 (éšæœºåŸºçº¿: ~2.77)
- **æ‰­è½¬è§’æŸå¤±**: 4.2669 (éšæœºåŸºçº¿: ~4.28)
- **æ€»æŸå¤±**: 7.0315 (éšæœºåŸºçº¿: ~7.05)

**ä¸»è¦é—®é¢˜**:
1. æ•°æ®é›†è§„æ¨¡è¿‡å° (ä»… 33 ä¸ªè®­ç»ƒæ ·æœ¬)
2. æ¨¡å‹å¯èƒ½æœªå……åˆ†å­¦ä¹ 
3. éœ€è¦éªŒè¯è®­ç»ƒè¿‡ç¨‹æ˜¯å¦æ­£å¸¸

---

## ğŸ¯ æ”¹è¿›æ­¥éª¤

### æ­¥éª¤ 1: è¯Šæ–­å½“å‰çŠ¶æ€ (ç«‹å³æ‰§è¡Œ)

```bash
# åˆ†æè®­ç»ƒå†å²
python analyze_training.py --checkpoint checkpoints/checkpoint_epoch_50.pt

# æˆ–è€…åˆ†ææ‰€æœ‰æ£€æŸ¥ç‚¹
python analyze_training.py --all
```

**ç›®æ ‡**: ç¡®è®¤è®­ç»ƒæŸå¤±æ˜¯å¦åœ¨ä¸‹é™ï¼Œæ‰¾å‡ºå…·ä½“é—®é¢˜

---

### æ­¥éª¤ 2: æ‰©å¤§æ•°æ®é›† (é«˜ä¼˜å…ˆçº§)

**å½“å‰çŠ¶æ€**: 
- è®­ç»ƒé›†: 33 ä¸ªæ ·æœ¬
- éªŒè¯é›†: 3 ä¸ªæ ·æœ¬  
- æµ‹è¯•é›†: 4 ä¸ªæ ·æœ¬

**ç›®æ ‡**: è‡³å°‘ 100-200 ä¸ªæ ·æœ¬

**æ–¹æ³•**:

1. **ä¸‹è½½æ›´å¤š CATH æ•°æ®**:
```bash
# æŸ¥çœ‹å¯ç”¨çš„ä¸‹è½½è„šæœ¬
python scripts/download_cath_subset.py --help

# ä¸‹è½½æ›´å¤šç»“æ„ (ä¾‹å¦‚ S40 å­é›†)
python scripts/download_cath_subset.py \
    --output_dir raw_data \
    --limit 200 \
    --random
```

2. **é¢„å¤„ç†æ–°æ•°æ®**:
```bash
python scripts/preprocess_dataset.py \
    --pdb_dir raw_data \
    --output_dir data/cache \
    --train_ratio 0.8 \
    --val_ratio 0.1 \
    --test_ratio 0.1
```

---

### æ­¥éª¤ 3: è°ƒæ•´è®­ç»ƒè¶…å‚æ•°

#### 3.1 é™ä½å­¦ä¹ ç‡

å¦‚æœè®­ç»ƒæŸå¤±ä¸ä¸‹é™ï¼Œå°è¯•æ›´å°çš„å­¦ä¹ ç‡ï¼š

```bash
python train.py \
    --pdb_path data/cache \
    --cache_dir data/cache \
    --epochs 100 \
    --learning_rate 5e-5 \  # é™ä½å­¦ä¹ ç‡
    --batch_size 4 \
    --save_dir checkpoints_v2
```

#### 3.2 å¢åŠ è®­ç»ƒè½®æ•°

```bash
python train.py \
    --pdb_path data/cache \
    --cache_dir data/cache \
    --epochs 200 \  # å¢åŠ è®­ç»ƒè½®æ•°
    --batch_size 4 \
    --save_dir checkpoints_v2
```

#### 3.3 è°ƒæ•´æ©ç ç­–ç•¥

```bash
# å°è¯•ä¸åŒçš„æ©ç æ¯”ä¾‹
python train.py \
    --pdb_path data/cache \
    --cache_dir data/cache \
    --mask_ratio 0.1 \  # æˆ– 0.2
    --masking_strategy random \
    --epochs 100
```

---

### æ­¥éª¤ 4: æ¨¡å‹æ¶æ„ä¼˜åŒ–

#### 4.1 å¢åŠ æ¨¡å‹å®¹é‡

```bash
python train.py \
    --pdb_path data/cache \
    --cache_dir data/cache \
    --hidden_dim 512 \  # å¢åŠ éšè—ç»´åº¦
    --num_encoder_layers 4 \
    --num_decoder_layers 4 \
    --num_heads 8 \
    --epochs 100
```

#### 4.2 æ£€æŸ¥æ¢¯åº¦æµ

åˆ›å»ºè¯Šæ–­è„šæœ¬æ£€æŸ¥ï¼š
- æ¢¯åº¦æ˜¯å¦æ­£å¸¸æµåŠ¨
- æ˜¯å¦æœ‰æ¢¯åº¦çˆ†ç‚¸æˆ–æ¶ˆå¤±
- æ¿€æ´»å€¼åˆ†å¸ƒæ˜¯å¦æ­£å¸¸

---

### æ­¥éª¤ 5: æ•°æ®è´¨é‡éªŒè¯

#### 5.1 éªŒè¯æ•°æ®é¢„å¤„ç†

```bash
# è¿è¡Œæ•°æ®æµ‹è¯•
python test_all.py --pdb_path data/cache --cache_dir data/cache
```

#### 5.2 æ£€æŸ¥æ•°æ®åˆ†å¸ƒ

- ç¡®è®¤ç‰‡æ®µç±»å‹åˆ†å¸ƒæ˜¯å¦å¹³è¡¡
- æ£€æŸ¥æ‰­è½¬è§’åˆ†å¸ƒæ˜¯å¦åˆç†
- éªŒè¯æ²¡æœ‰æ•°æ®æ³„æ¼

---

### æ­¥éª¤ 6: è®­ç»ƒç›‘æ§

#### 6.1 å¯è§†åŒ–è®­ç»ƒæ›²çº¿

åˆ›å»ºè®­ç»ƒæ›²çº¿å¯è§†åŒ–è„šæœ¬ï¼ˆå¯é€‰ï¼‰ï¼š

```python
# visualize_training.py
import torch
import matplotlib.pyplot as plt

checkpoint = torch.load('checkpoints/checkpoint_epoch_50.pt')
train_losses = checkpoint['train_losses']

# æå–æŸå¤±å€¼å¹¶ç»˜å›¾
# ...
```

#### 6.2 å®šæœŸæ£€æŸ¥ç‚¹è¯„ä¼°

æ¯ 10 ä¸ª epoch è¯„ä¼°ä¸€æ¬¡éªŒè¯é›†æ€§èƒ½ï¼Œç¡®ä¿æ¨¡å‹åœ¨å­¦ä¹ ã€‚

---

## ğŸ“‹ ä¼˜å…ˆçº§æ’åº

### ğŸ”´ é«˜ä¼˜å…ˆçº§ (ç«‹å³æ‰§è¡Œ)

1. **è¿è¡Œè¯Šæ–­è„šæœ¬** - äº†è§£å½“å‰è®­ç»ƒçŠ¶æ€
   ```bash
   python analyze_training.py --checkpoint checkpoints/checkpoint_epoch_50.pt
   ```

2. **æ‰©å¤§æ•°æ®é›†** - è‡³å°‘å¢åŠ åˆ° 100+ æ ·æœ¬
   ```bash
   python scripts/download_cath_subset.py --max_structures 200
   python scripts/preprocess_dataset.py --pdb_dir raw_data --output_dir data/cache
   ```

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ (æ•°æ®å‡†å¤‡å¥½å)

3. **é‡æ–°è®­ç»ƒ** - ä½¿ç”¨æ›´å¤šæ•°æ®å’Œè°ƒæ•´åçš„è¶…å‚æ•°
   ```bash
   python train.py \
       --pdb_path data/cache \
       --cache_dir data/cache \
       --epochs 100 \
       --learning_rate 5e-5 \
       --batch_size 4
   ```

4. **ç›‘æ§è®­ç»ƒè¿‡ç¨‹** - ç¡®ä¿æŸå¤±åœ¨ä¸‹é™

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ (åŸºç¡€è®­ç»ƒç¨³å®šå)

5. **æ¨¡å‹æ¶æ„ä¼˜åŒ–** - å¢åŠ å®¹é‡ã€è°ƒæ•´å±‚æ•°
6. **è¶…å‚æ•°è°ƒä¼˜** - ç³»ç»ŸåŒ–æœç´¢æœ€ä½³å‚æ•°

---

## ğŸ§ª éªŒè¯æ”¹è¿›æ•ˆæœ

æ¯æ¬¡æ”¹è¿›åï¼Œè¿è¡Œæµ‹è¯•è¯„ä¼°ï¼š

```bash
python test.py \
    --model_path checkpoints/best_model.pt \
    --pdb_path data/cache \
    --cache_dir data/cache \
    --use_test_split
```

**æˆåŠŸæ ‡å‡†**:
- ç‰‡æ®µæŸå¤± < 2.0 (ç›¸å¯¹åŸºçº¿æ”¹è¿› > 25%)
- æ‰­è½¬è§’æŸå¤± < 3.5 (ç›¸å¯¹åŸºçº¿æ”¹è¿› > 15%)
- æ€»æŸå¤± < 5.5 (ç›¸å¯¹åŸºçº¿æ”¹è¿› > 20%)

---

## ğŸ“ è®°å½•æ”¹è¿›è¿‡ç¨‹

å»ºè®®åˆ›å»ºä¸€ä¸ªå®éªŒæ—¥å¿—ï¼Œè®°å½•ï¼š
- æ¯æ¬¡å®éªŒçš„é…ç½®ï¼ˆæ•°æ®é›†å¤§å°ã€è¶…å‚æ•°ç­‰ï¼‰
- è®­ç»ƒæŸå¤±æ›²çº¿
- æµ‹è¯•ç»“æœ
- è§‚å¯Ÿåˆ°çš„ç°è±¡å’Œé—®é¢˜

---

## ğŸ” æ•…éšœæ’æŸ¥

å¦‚æœè®­ç»ƒæŸå¤±ä»ç„¶ä¸ä¸‹é™ï¼š

1. **æ£€æŸ¥æ•°æ®åŠ è½½**: ç¡®è®¤æ•°æ®æ ¼å¼æ­£ç¡®
2. **æ£€æŸ¥æŸå¤±è®¡ç®—**: éªŒè¯æŸå¤±å‡½æ•°å®ç°
3. **æ£€æŸ¥æ¨¡å‹è¾“å‡º**: ç¡®è®¤æ¨¡å‹è¾“å‡ºèŒƒå›´åˆç†
4. **æ£€æŸ¥ä¼˜åŒ–å™¨**: ç¡®è®¤ä¼˜åŒ–å™¨çŠ¶æ€æ­£å¸¸
5. **ç®€åŒ–ä»»åŠ¡**: å…ˆåœ¨å°è§„æ¨¡æ•°æ®ä¸ŠéªŒè¯æ¨¡å‹èƒ½å­¦ä¹ 

---

## ğŸ“š å‚è€ƒèµ„æº

- é¡¹ç›®æ–‡æ¡£: `PROJECT_STRUCTURE.md`
- è®­ç»ƒæŒ‡å—: `TRAINING_GUIDE.md`
- æµ‹è¯•æŒ‡å—: `TESTING_GUIDE.md`

---

**ä¸‹ä¸€æ­¥**: è¿è¡Œ `python analyze_training.py` å¼€å§‹è¯Šæ–­ï¼
